# О компании

Иви — один из лидеров рынка онлайн-кинотеатров в РФ и странах СНГ. Уже 15 лет мы работаем на рынке профессионального легального видеоконтента. Наша команда не только предоставляет миллионам пользователей доступ к кино и сериалам, но и создает их сама.

# Цель проекта

Автоматизировать создание кратких содержаний эпизодов сериалов, чтобы зрители могли быстро вспомнить сюжет и сильнее вовлечься в просмотр.

Необходимо написать код на языке Python, который на вход принимает видеофайл(ы) и субтитры, а на выходе отдаёт рекапы в виде текста и видео. Сроки выполнения задачи соответствуют срокам проведения хакатона.

# Описание проекта (проектная задача)

Проект по генерации рекапов для сериалов направлен на автоматизацию создания кратких и информативных содержаний эпизодов с использованием технологий обработки естественного языка, компьютерного зрения и других методов. Система анализирует субтитры, аудиодорожки и видеоряд, выделяет ключевые события и сюжетные повороты, после чего генерирует лаконичные тексты и видео, адаптируя их под запросы пользователей.

# Какие навыки и компетенции нужны для выполнения

- Python версии не ниже 3.10.
- Публикация кода в приватном репозитории с предоставлением к нему доступа.
- Написание докстрингов и аннотаций типов.
- Создание скрипта для сбора докер-образа со всеми необходимыми зависимостями, внутри которого можно вызвать скрипт и получить результат.
- Создание инструкции по сборке и запуску проекта.

# Список материалов, предоставляемых заказчиком

Будут предоставлены видеофайлы нескольких сериалов с оригинальными дорожками на русском языке и субтитры к ним. Можно использовать открытые источники для обогащения данных.

  
# Общее описание задачи

Рекап — это блок, который начинается словами «Ранее в сериале» или «Вот что вы пропустили» и рассказывает о событиях прошлых эпизодов/сезонов сериала. Рекапы могут иметь несколько форматов, например, текстовые рекапы с кратким описанием серий/сезонов сериала с выделением главных событий, персонажей и сюжетных поворотов или видеорекапы продолжительностью до нескольких минут с ключевыми сценами, диалогами, наложением закадрового текста и фоновой музыки.

Рекапы одновременно могут быть направлены на решение нескольких проблем:

1. Поддержание контекста — при длительном перерыве между просмотрами серий/сезонов или при одновременном просмотре нескольких сериалов пользователи могут легко потерять нить или запутаться в сложных сюжетных линиях.
2. Рекапы помогут восстановить последовательность событий и понять, как развивались сюжетные линии.
3. Подготовка к просмотру. Если между выходами серий/сезонов сериала проходит много времени, рекапы позволят быстро войти в курс дела и понять, что происходило ранее, без необходимости пересматривать все предыдущие эпизоды/сезоны.
4. Узнать основные моменты. Если у пользователя мало времени или он не может посмотреть целый эпизод/сезон, рекапы помогут получить общее представление о развитии сюжета и ключевых событиях.
5. Понять сложные сюжеты. В сериалах с запутанной сюжетной линией и большим количеством персонажей (например, «Игра престолов» или «Мистер Робот») рекапы помогут разобраться в происходящем.
6. Повторно открыть сериал. Заново открыть для пользователя то, почему он влюбился в сериал изначально, и предложить ему пересмотреть его.
7. Адаптация под разные уровни вовлечённости. Не все пользователи стремятся к глубокому анализу и детальному пересмотру каждого эпизода. Рекапы позволяют как новичкам, так и опытным зрителям быстро ориентироваться в сюжете, выбирая для себя наиболее интересные моменты.

В целом, рекапы направлены на решение проблемы быстрого возврата пользователя к тому, что он смотрел, без повторного просмотра.

# Что потребуется сделать

Вам нужно написать код на языке Python, который принимает на вход видеофайл(ы) и субтитры, а на выходе отдаёт два рекапа:

- текстовый рекап в формате `txt`,
- видеорекап в формате `mp4`.

В качестве дополнения можно предусмотреть сохранение id серии(й) и тайм-кодов сюжетных событий, из которых генерировались рекапы, например, в файл в формате json.

Код необходимо опубликовать в приватном репозитории (GitHub или GitLab) и предоставить к нему доступ. Вместе с кодом нужно приложить скрипт, который собирает docker-образ со всеми необходимыми зависимостями, внутри которого можно вызвать скрипт и получить результат, а также инструкцию, как это всё собирать и запускать.

# Критерии хорошего рекапа

Рекап должен соответствовать следующим критериям:

- Логичная структура — чёткое разделение на основные сюжетные линии или тематические блоки, хронологическая последовательность событий (пользователь не должен путаться в сюжетных линиях).
- Полнота охвата — упоминание всех значимых сюжетных линий и персонажей, баланс между главными и второстепенными событиями, акцент на главном.
- Оптимальный объём — 2–3 минуты для видеорекапа и не более 500 слов для текстового (100–200 слов для краткого рекапа и быстрого напоминания, 300–500 слов — стандартного рекапа).
- Стилистическое соответствие жанру — тон текста может отражать жанр сериала, например, мрачный для драм, ироничный для комедий. Возможно использование цитат или ключевых фраз из сериала, например, «Зима близко» для «Игры престолов». Важна передача атмосферы сериала.
- Спойлеры — поскольку рекап подразумевает, что пользователь уже посмотрел эпизод/сезон сериала, то рекап может содержать спойлеры.

# Данные

Вам будут предоставлены видеофайлы нескольких сериалов с оригинальными дорожками на русском языке и субтитры к ним.

Все видео являются неразмеченными и не имеют рекапов. Можно использовать открытые источники для обогащения данных.

# Структура файлов и папок

В папке **videos** хранятся видеофайлы в формате `mp4`. Имена файлов имеют следующую структуру: `compilation_id_season_id_episode_id.mp4`, где `compilation_id` — соответствуют идентификатору сериала, `season_id` — порядковый номер сезона, `episode_id` — порядковый номер серии в сезоне.

В папке **subtitles** хранятся субтитры в формате `srt`. Имена файлов имеют аналогичную структуру.

# Критерии оценки

У нас есть тестовый набор видеофайлов. После окончания хакатона мы обработаем эти видео скриптами участников и оценим по следующим критериям:

1. Функциональность — насколько качественно генерируются текстовые и видео рекапы. Редакторы отсмотрят и прочитают получившиеся рекапы и выставят им оценки по пятибалльной шкале по критериями из пункта «Критерии хорошего рекапа».
2. Техническая реализация — чистота кода, архитектура, наличие тестов, понятная и полная документация.
3. Удобство использования — простота запуска и использования.
4. Креативность — интересные фичи, нестандартный подход.